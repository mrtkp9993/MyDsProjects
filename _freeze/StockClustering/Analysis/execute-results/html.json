{
  "hash": "20cd0cfd7283a58ab81fc2a79587ef74",
  "result": {
    "markdown": "---\ntitle: \"Stock Return and Fundamental Clustering & Portfolio Selection\"\ndate: 08/26/2022\nauthor: Murat Koptur\nexecute:\n  freeze: auto\n  echo: false\n  warning: false\n  error: false\nformat: \n   html:\n     df-print: paged\nlisting: true\n---\n\n\nWe have following features for BIST30 stocks:\n\n-   Momentum 3-months, 6-months, 1-year\n\n-   Volatility 1-year, 2-year, 3-year\n\n-   Price-To-Book Ratio\n\n-   Market Capitalization\n\n-   Return On Equity\n\n-   Earnings Growth\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"stock\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"return1y\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"return2y\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"return3y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"momentum_3m\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"momentum_6m\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"momentum_1y\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"volatility_1y\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"volatility_2y\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"volatility_3y\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"priceToBook\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"marketCap\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"returnOnEquity\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"earningsGrowth\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"TUPRS.IS\",\"2\":\"0.8097782\",\"3\":\"0.8097782\",\"4\":\"1.0082923\",\"5\":\"0.24683700\",\"6\":\"0.58715289\",\"7\":\"0.8097782\",\"8\":\"59.5497477\",\"9\":\"68.0872960\",\"10\":\"60.2208196\",\"11\":\"3.0971577\",\"12\":\"86094053376\",\"13\":\"0.69121\",\"14\":\"5.243\"},{\"1\":\"VAKBN.IS\",\"2\":\"0.4971455\",\"3\":\"0.4971455\",\"4\":\"0.0989532\",\"5\":\"0.34844448\",\"6\":\"0.59408752\",\"7\":\"0.4971455\",\"8\":\"0.4225866\",\"9\":\"0.4574720\",\"10\":\"0.7448922\",\"11\":\"0.5276930\",\"12\":\"43023728640\",\"13\":\"0.22103\",\"14\":\"4.198\"},{\"1\":\"KRDMD.IS\",\"2\":\"0.3194642\",\"3\":\"0.3194642\",\"4\":\"1.5587607\",\"5\":\"-0.14700820\",\"6\":\"0.07868959\",\"7\":\"0.3194642\",\"8\":\"2.9089397\",\"9\":\"3.4753076\",\"10\":\"4.0154757\",\"11\":\"1.2675908\",\"12\":\"12782130176\",\"13\":\"0.58783\",\"14\":\"0.217\"},{\"1\":\"DOHOL.IS\",\"2\":\"0.6937835\",\"3\":\"0.6937835\",\"4\":\"1.1887333\",\"5\":\"0.31659303\",\"6\":\"0.77322029\",\"7\":\"0.6937835\",\"8\":\"0.6243649\",\"9\":\"0.5848286\",\"10\":\"0.8083117\",\"11\":\"0.8525232\",\"12\":\"13520008192\",\"13\":\"0.36324\",\"14\":\"5.959\"},{\"1\":\"AKBNK.IS\",\"2\":\"0.5997797\",\"3\":\"0.5997797\",\"4\":\"0.5046686\",\"5\":\"0.41814359\",\"6\":\"0.62367386\",\"7\":\"0.5997797\",\"8\":\"1.4661382\",\"9\":\"1.5514123\",\"10\":\"1.4086818\",\"11\":\"0.6069042\",\"12\":\"62347997184\",\"13\":\"0.34285\",\"14\":\"5.225\"},{\"1\":\"TKFEN.IS\",\"2\":\"0.3480025\",\"3\":\"0.3480025\",\"4\":\"0.4823332\",\"5\":\"0.34543309\",\"6\":\"0.43789254\",\"7\":\"0.3480025\",\"8\":\"4.0735408\",\"9\":\"3.9137605\",\"10\":\"3.6122403\",\"11\":\"1.1585187\",\"12\":\"10197199872\",\"13\":\"0.14750\",\"14\":\"2.065\"},{\"1\":\"FROTO.IS\",\"2\":\"0.3973816\",\"3\":\"0.3973816\",\"4\":\"1.7215448\",\"5\":\"0.09278175\",\"6\":\"0.27313286\",\"7\":\"0.3973816\",\"8\":\"53.9924107\",\"9\":\"72.2168711\",\"10\":\"86.9934541\",\"11\":\"10.1407440\",\"12\":\"118326861824\",\"13\":\"1.33964\",\"14\":\"2.707\"},{\"1\":\"GARAN.IS\",\"2\":\"0.8667040\",\"3\":\"0.8667040\",\"4\":\"0.9014564\",\"5\":\"0.59045587\",\"6\":\"0.88370660\",\"7\":\"0.8667040\",\"8\":\"2.8864217\",\"9\":\"3.1453798\",\"10\":\"2.7832952\",\"11\":\"0.9488009\",\"12\":\"106008002560\",\"13\":\"0.32325\",\"14\":\"3.297\"},{\"1\":\"KOZAA.IS\",\"2\":\"0.3818817\",\"3\":\"0.3818817\",\"4\":\"0.9647968\",\"5\":\"-0.13844356\",\"6\":\"0.29681450\",\"7\":\"0.3818817\",\"8\":\"5.5936412\",\"9\":\"5.9709433\",\"10\":\"6.3037417\",\"11\":\"1.8659098\",\"12\":\"10206503936\",\"13\":\"0.28619\",\"14\":\"-0.347\"},{\"1\":\"HALKB.IS\",\"2\":\"0.4580140\",\"3\":\"0.4580140\",\"4\":\"0.1809201\",\"5\":\"0.20817897\",\"6\":\"0.48726250\",\"7\":\"0.4580140\",\"8\":\"0.4939186\",\"9\":\"0.4554376\",\"10\":\"0.6480458\",\"11\":\"0.5318118\",\"12\":\"35429822464\",\"13\":\"0.11143\",\"14\":\"7.206\"},{\"1\":\"TCELL.IS\",\"2\":\"0.1906959\",\"3\":\"0.1906959\",\"4\":\"0.6006008\",\"5\":\"0.14412658\",\"6\":\"0.08490204\",\"7\":\"0.1906959\",\"8\":\"2.2701318\",\"9\":\"2.5876219\",\"10\":\"2.9737486\",\"11\":\"1.9666116\",\"12\":\"46805876736\",\"13\":\"0.24837\",\"14\":\"0.667\"},{\"1\":\"KOZAL.IS\",\"2\":\"0.3891447\",\"3\":\"0.3891447\",\"4\":\"0.8327075\",\"5\":\"-0.14407311\",\"6\":\"0.39957050\",\"7\":\"0.3891447\",\"8\":\"29.6065978\",\"9\":\"30.3709799\",\"10\":\"32.9557118\",\"11\":\"1.9043031\",\"12\":\"23500251136\",\"13\":\"0.32466\",\"14\":\"0.072\"},{\"1\":\"VESTL.IS\",\"2\":\"0.1833859\",\"3\":\"0.1833859\",\"4\":\"1.1027709\",\"5\":\"0.10950624\",\"6\":\"0.28945667\",\"7\":\"0.1833859\",\"8\":\"2.1185294\",\"9\":\"4.5243707\",\"10\":\"7.1434683\",\"11\":\"1.0565958\",\"12\":\"9976461312\",\"13\":\"0.23946\",\"14\":\"NA\"},{\"1\":\"YKBNK.IS\",\"2\":\"0.7765429\",\"3\":\"0.7765429\",\"4\":\"1.1094099\",\"5\":\"0.44307147\",\"6\":\"0.71905580\",\"7\":\"0.7765429\",\"8\":\"0.9728832\",\"9\":\"1.0493940\",\"10\":\"0.9635260\",\"11\":\"0.6234347\",\"12\":\"58875936768\",\"13\":\"0.35390\",\"14\":\"4.423\"},{\"1\":\"TTKOM.IS\",\"2\":\"0.2454986\",\"3\":\"0.2454986\",\"4\":\"0.6578785\",\"5\":\"0.11241250\",\"6\":\"0.35166711\",\"7\":\"0.2454986\",\"8\":\"1.2699355\",\"9\":\"1.5810834\",\"10\":\"1.6260786\",\"11\":\"3.1039488\",\"12\":\"37414998016\",\"13\":\"0.41457\",\"14\":\"0.094\"},{\"1\":\"BIMAS.IS\",\"2\":\"0.6243787\",\"3\":\"0.6243787\",\"4\":\"1.0034898\",\"5\":\"0.32736023\",\"6\":\"0.44833023\",\"7\":\"0.6243787\",\"8\":\"12.2669850\",\"9\":\"10.9834209\",\"10\":\"14.5576307\",\"11\":\"7.5857380\",\"12\":\"66778947584\",\"13\":\"0.62101\",\"14\":\"1.314\"},{\"1\":\"PETKM.IS\",\"2\":\"0.5184885\",\"3\":\"0.5184885\",\"4\":\"1.4199330\",\"5\":\"0.27805933\",\"6\":\"0.52491942\",\"7\":\"0.5184885\",\"8\":\"1.4273099\",\"9\":\"2.1124968\",\"10\":\"2.4640475\",\"11\":\"1.9628410\",\"12\":\"33200640000\",\"13\":\"0.56749\",\"14\":\"0.878\"},{\"1\":\"ARCLK.IS\",\"2\":\"0.4209329\",\"3\":\"0.4209329\",\"4\":\"1.3867944\",\"5\":\"-0.09351342\",\"6\":\"0.28675603\",\"7\":\"0.4209329\",\"8\":\"15.4963918\",\"9\":\"17.1264938\",\"10\":\"18.3454790\",\"11\":\"1.9600855\",\"12\":\"44267511808\",\"13\":\"0.15921\",\"14\":\"-0.462\"},{\"1\":\"EREGL.IS\",\"2\":\"0.1854478\",\"3\":\"0.1854478\",\"4\":\"1.6588902\",\"5\":\"-0.13973273\",\"6\":\"0.08678581\",\"7\":\"0.1854478\",\"8\":\"6.4310382\",\"9\":\"8.4562576\",\"10\":\"9.4337947\",\"11\":\"1.0466932\",\"12\":\"100068720640\",\"13\":\"0.30659\",\"14\":\"1.086\"},{\"1\":\"SAHOL.IS\",\"2\":\"0.7185151\",\"3\":\"0.7185151\",\"4\":\"1.1289984\",\"5\":\"0.20238289\",\"6\":\"0.55758471\",\"7\":\"0.7185151\",\"8\":\"4.3804921\",\"9\":\"4.7330481\",\"10\":\"4.4002277\",\"11\":\"0.7472683\",\"12\":\"51148140544\",\"13\":\"0.39955\",\"14\":\"3.725\"},{\"1\":\"EKGYO.IS\",\"2\":\"0.6713687\",\"3\":\"0.6713687\",\"4\":\"1.0839516\",\"5\":\"0.34193269\",\"6\":\"0.74403992\",\"7\":\"0.6713687\",\"8\":\"0.5077735\",\"9\":\"0.4593855\",\"10\":\"0.5447612\",\"11\":\"0.8649004\",\"12\":\"14461424640\",\"13\":\"0.13061\",\"14\":\"0.462\"},{\"1\":\"THYAO.IS\",\"2\":\"1.2631272\",\"3\":\"1.2631272\",\"4\":\"1.5884728\",\"5\":\"0.34983801\",\"6\":\"1.01648571\",\"7\":\"1.2631272\",\"8\":\"15.2851801\",\"9\":\"14.5505611\",\"10\":\"12.8210908\",\"11\":\"0.7127153\",\"12\":\"96185999360\",\"13\":\"0.21375\",\"14\":\"NA\"},{\"1\":\"PGSUS.IS\",\"2\":\"0.8789941\",\"3\":\"0.8789941\",\"4\":\"0.8626481\",\"5\":\"0.36031238\",\"6\":\"0.78309545\",\"7\":\"0.8789941\",\"8\":\"38.7289338\",\"9\":\"38.0855376\",\"10\":\"35.4440269\",\"11\":\"2.9115245\",\"12\":\"20828280832\",\"13\":\"-0.38290\",\"14\":\"NA\"},{\"1\":\"ISCTR.IS\",\"2\":\"0.9520986\",\"3\":\"0.9520986\",\"4\":\"1.0969968\",\"5\":\"0.50679626\",\"6\":\"0.85036070\",\"7\":\"0.9520986\",\"8\":\"1.2035380\",\"9\":\"1.1371403\",\"10\":\"1.0053363\",\"11\":\"0.6189942\",\"12\":\"80154689536\",\"13\":\"0.33295\",\"14\":\"5.590\"},{\"1\":\"KCHOL.IS\",\"2\":\"0.5362835\",\"3\":\"0.5362835\",\"4\":\"0.9169263\",\"5\":\"0.14595991\",\"6\":\"0.42754595\",\"7\":\"0.5362835\",\"8\":\"6.9894189\",\"9\":\"8.9634457\",\"10\":\"8.5082960\",\"11\":\"1.1880987\",\"12\":\"118537068544\",\"13\":\"0.42805\",\"14\":\"3.832\"},{\"1\":\"ASELS.IS\",\"2\":\"0.2651602\",\"3\":\"0.2651602\",\"4\":\"0.9732999\",\"5\":\"0.10691288\",\"6\":\"0.20205951\",\"7\":\"0.2651602\",\"8\":\"3.6468464\",\"9\":\"3.7922979\",\"10\":\"4.7479355\",\"11\":\"3.0969126\",\"12\":\"59234398208\",\"13\":\"0.32319\",\"14\":\"0.374\"},{\"1\":\"TAVHL.IS\",\"2\":\"0.6549657\",\"3\":\"0.6549657\",\"4\":\"0.8370175\",\"5\":\"0.31849348\",\"6\":\"0.62543657\",\"7\":\"0.6549657\",\"8\":\"10.8650504\",\"9\":\"12.0554039\",\"10\":\"10.8617462\",\"11\":\"2.2842455\",\"12\":\"22631309312\",\"13\":\"0.06828\",\"14\":\"NA\"},{\"1\":\"GUBRF.IS\",\"2\":\"0.3337732\",\"3\":\"0.3337732\",\"4\":\"2.4717595\",\"5\":\"0.33572701\",\"6\":\"0.34358043\",\"7\":\"0.3337732\",\"8\":\"13.2494067\",\"9\":\"17.8245414\",\"10\":\"28.5345912\",\"11\":\"32.7149050\",\"12\":\"35337199616\",\"13\":\"0.28873\",\"14\":\"3.672\"},{\"1\":\"SISE.IS\",\"2\":\"0.6301767\",\"3\":\"0.6301767\",\"4\":\"1.6035968\",\"5\":\"0.16080153\",\"6\":\"0.70785548\",\"7\":\"0.6301767\",\"8\":\"5.1706581\",\"9\":\"5.4602784\",\"10\":\"5.4105740\",\"11\":\"3.2930590\",\"12\":\"78479441920\",\"13\":\"0.30006\",\"14\":\"1.732\"},{\"1\":\"SASA.IS\",\"2\":\"0.6940929\",\"3\":\"0.6940929\",\"4\":\"2.9186904\",\"5\":\"0.37163922\",\"6\":\"0.82295884\",\"7\":\"0.6940929\",\"8\":\"11.4960015\",\"9\":\"12.1539264\",\"10\":\"12.7270834\",\"11\":\"19.8804190\",\"12\":\"58786533376\",\"13\":\"0.61790\",\"14\":\"20.255\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nWe need to standardize the features:\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"stock\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"return1y\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"return2y\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"return3y\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"momentum_3m\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"momentum_6m\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"momentum_1y\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"volatility_1y\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"volatility_2y\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"volatility_3y\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"priceToBook\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"marketCap\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"returnOnEquity\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"earningsGrowth\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"TUPRS.IS\",\"2\":\"0.8097782\",\"3\":\"0.8097782\",\"4\":\"1.0082923\",\"5\":\"0.534053412\",\"6\":\"0.542189595\",\"7\":\"0.580131786\",\"8\":\"1.000000000\",\"9\":\"9.424541e-01\",\"10\":\"0.690306081\",\"11\":\"0.0798287438\",\"12\":\"0.701152969\",\"13\":\"0.6235617\",\"14\":\"0.275377709\"},{\"1\":\"VAKBN.IS\",\"2\":\"0.4971455\",\"3\":\"0.4971455\",\"4\":\"0.0989532\",\"5\":\"0.671832977\",\"6\":\"0.549584199\",\"7\":\"0.290587764\",\"8\":\"0.000000000\",\"9\":\"2.834926e-05\",\"10\":\"0.002315026\",\"11\":\"0.0000000000\",\"12\":\"0.304413066\",\"13\":\"0.3506043\",\"14\":\"0.224936043\"},{\"1\":\"KRDMD.IS\",\"2\":\"0.3194642\",\"3\":\"0.3194642\",\"4\":\"1.5587607\",\"5\":\"0.000000000\",\"6\":\"0.000000000\",\"7\":\"0.126028552\",\"8\":\"0.042050947\",\"9\":\"4.208208e-02\",\"10\":\"0.040147680\",\"11\":\"0.0229873218\",\"12\":\"0.025844263\",\"13\":\"0.5635457\",\"14\":\"0.032775016\"},{\"1\":\"DOHOL.IS\",\"2\":\"0.6937835\",\"3\":\"0.6937835\",\"4\":\"1.1887333\",\"5\":\"0.628642459\",\"6\":\"0.740598817\",\"7\":\"0.472703540\",\"8\":\"0.003412616\",\"9\":\"1.803071e-03\",\"10\":\"0.003048634\",\"11\":\"0.0100919023\",\"12\":\"0.032641185\",\"13\":\"0.4331627\",\"14\":\"0.309938698\"},{\"1\":\"AKBNK.IS\",\"2\":\"0.5997797\",\"3\":\"0.5997797\",\"4\":\"0.5046686\",\"5\":\"0.766344851\",\"6\":\"0.581132991\",\"7\":\"0.385642121\",\"8\":\"0.017649277\",\"9\":\"1.527247e-02\",\"10\":\"0.009993448\",\"11\":\"0.0024609525\",\"12\":\"0.482417492\",\"13\":\"0.4213255\",\"14\":\"0.274508857\"},{\"1\":\"TKFEN.IS\",\"2\":\"0.3480025\",\"3\":\"0.3480025\",\"4\":\"0.4823332\",\"5\":\"0.667749531\",\"6\":\"0.383028829\",\"7\":\"0.152459266\",\"8\":\"0.061747497\",\"9\":\"4.819194e-02\",\"10\":\"0.035483232\",\"11\":\"0.0195986437\",\"12\":\"0.002033321\",\"13\":\"0.3079174\",\"14\":\"0.121977120\"},{\"1\":\"FROTO.IS\",\"2\":\"0.3973816\",\"3\":\"0.3973816\",\"4\":\"1.7215448\",\"5\":\"0.325154760\",\"6\":\"0.207340665\",\"7\":\"0.198191583\",\"8\":\"0.906010422\",\"9\":\"1.000000e+00\",\"10\":\"1.000000000\",\"11\":\"0.2986605674\",\"12\":\"0.998063692\",\"13\":\"1.0000000\",\"14\":\"0.152966163\"},{\"1\":\"GARAN.IS\",\"2\":\"0.8667040\",\"3\":\"0.8667040\",\"4\":\"0.9014564\",\"5\":\"1.000000000\",\"6\":\"0.858413667\",\"7\":\"0.632853461\",\"8\":\"0.041670106\",\"9\":\"3.748451e-02\",\"10\":\"0.025894365\",\"11\":\"0.0130830797\",\"12\":\"0.884589205\",\"13\":\"0.4099469\",\"14\":\"0.181445190\"},{\"1\":\"KOZAA.IS\",\"2\":\"0.3818817\",\"3\":\"0.3818817\",\"4\":\"0.9647968\",\"5\":\"0.011613650\",\"6\":\"0.232593100\",\"7\":\"0.183836441\",\"8\":\"0.087456501\",\"9\":\"7.685891e-02\",\"10\":\"0.066617323\",\"11\":\"0.0415760396\",\"12\":\"0.002119025\",\"13\":\"0.3884322\",\"14\":\"0.005550997\"},{\"1\":\"HALKB.IS\",\"2\":\"0.4580140\",\"3\":\"0.4580140\",\"4\":\"0.1809201\",\"5\":\"0.481633183\",\"6\":\"0.435673488\",\"7\":\"0.254346225\",\"8\":\"0.001206418\",\"9\":\"0.000000e+00\",\"10\":\"0.001194749\",\"11\":\"0.0001279639\",\"12\":\"0.234462222\",\"13\":\"0.2869774\",\"14\":\"0.370130810\"},{\"1\":\"TCELL.IS\",\"2\":\"0.1906959\",\"3\":\"0.1906959\",\"4\":\"0.6006008\",\"5\":\"0.394778257\",\"6\":\"0.006624517\",\"7\":\"0.006770167\",\"8\":\"0.031246980\",\"9\":\"2.971212e-02\",\"10\":\"0.028097445\",\"11\":\"0.0447046672\",\"12\":\"0.339252113\",\"13\":\"0.3664762\",\"14\":\"0.054496307\"},{\"1\":\"KOZAL.IS\",\"2\":\"0.3891447\",\"3\":\"0.3891447\",\"4\":\"0.8327075\",\"5\":\"0.003979988\",\"6\":\"0.342164890\",\"7\":\"0.190563078\",\"8\":\"0.493580457\",\"9\":\"4.168749e-01\",\"10\":\"0.374915449\",\"11\":\"0.0427688518\",\"12\":\"0.124573638\",\"13\":\"0.4107655\",\"14\":\"0.025775933\"},{\"1\":\"VESTL.IS\",\"2\":\"0.1833859\",\"3\":\"0.1833859\",\"4\":\"1.1027709\",\"5\":\"0.347833145\",\"6\":\"0.224747230\",\"7\":\"0.000000000\",\"8\":\"0.028682975\",\"9\":\"5.670083e-02\",\"10\":\"0.076330906\",\"11\":\"0.0164320787\",\"12\":\"0.000000000\",\"13\":\"0.3613037\",\"14\":\"NA\"},{\"1\":\"YKBNK.IS\",\"2\":\"0.7765429\",\"3\":\"0.7765429\",\"4\":\"1.1094099\",\"5\":\"0.800147014\",\"6\":\"0.682841605\",\"7\":\"0.549350968\",\"8\":\"0.009307002\",\"9\":\"8.276819e-03\",\"10\":\"0.004844084\",\"11\":\"0.0029745248\",\"12\":\"0.450434800\",\"13\":\"0.4277404\",\"14\":\"0.235796689\"},{\"1\":\"TTKOM.IS\",\"2\":\"0.2454986\",\"3\":\"0.2454986\",\"4\":\"0.6578785\",\"5\":\"0.351774024\",\"6\":\"0.291084075\",\"7\":\"0.057525559\",\"8\":\"0.014330958\",\"9\":\"1.568594e-02\",\"10\":\"0.012508198\",\"11\":\"0.0800397313\",\"12\":\"0.252748556\",\"13\":\"0.4629617\",\"14\":\"0.026837863\"},{\"1\":\"BIMAS.IS\",\"2\":\"0.6243787\",\"3\":\"0.6243787\",\"4\":\"1.0034898\",\"5\":\"0.643242774\",\"6\":\"0.394158842\",\"7\":\"0.408424495\",\"8\":\"0.200320770\",\"9\":\"1.467081e-01\",\"10\":\"0.162094637\",\"11\":\"0.2192810300\",\"12\":\"0.523232945\",\"13\":\"0.5828079\",\"14\":\"0.085726698\"},{\"1\":\"PETKM.IS\",\"2\":\"0.5184885\",\"3\":\"0.5184885\",\"4\":\"1.4199330\",\"5\":\"0.576390836\",\"6\":\"0.475828182\",\"7\":\"0.310354505\",\"8\":\"0.016992585\",\"9\":\"2.309122e-02\",\"10\":\"0.022201449\",\"11\":\"0.0445875213\",\"12\":\"0.213928231\",\"13\":\"0.5517376\",\"14\":\"0.064681180\"},{\"1\":\"ARCLK.IS\",\"2\":\"0.4209329\",\"3\":\"0.4209329\",\"4\":\"1.3867944\",\"5\":\"0.072538830\",\"6\":\"0.221867458\",\"7\":\"0.220003576\",\"8\":\"0.254938761\",\"9\":\"2.323122e-01\",\"10\":\"0.205910780\",\"11\":\"0.0445019127\",\"12\":\"0.315870106\",\"13\":\"0.3147155\",\"14\":\"0.000000000\"},{\"1\":\"EREGL.IS\",\"2\":\"0.1854478\",\"3\":\"0.1854478\",\"4\":\"1.6588902\",\"5\":\"0.009865527\",\"6\":\"0.008633237\",\"7\":\"0.001909642\",\"8\":\"0.101619146\",\"9\":\"1.114919e-01\",\"10\":\"0.102824383\",\"11\":\"0.0161244223\",\"12\":\"0.829879840\",\"13\":\"0.4002752\",\"14\":\"0.074721243\"},{\"1\":\"SAHOL.IS\",\"2\":\"0.7185151\",\"3\":\"0.7185151\",\"4\":\"1.1289984\",\"5\":\"0.473773719\",\"6\":\"0.510660165\",\"7\":\"0.495608721\",\"8\":\"0.066938873\",\"9\":\"5.960877e-02\",\"10\":\"0.044598320\",\"11\":\"0.0068218167\",\"12\":\"0.379250635\",\"13\":\"0.4542420\",\"14\":\"0.202104552\"},{\"1\":\"EKGYO.IS\",\"2\":\"0.6713687\",\"3\":\"0.6713687\",\"4\":\"1.0839516\",\"5\":\"0.663003004\",\"6\":\"0.709482911\",\"7\":\"0.451944154\",\"8\":\"0.001440742\",\"9\":\"5.501449e-05\",\"10\":\"0.000000000\",\"11\":\"0.0104764401\",\"12\":\"0.041312990\",\"13\":\"0.2981121\",\"14\":\"0.044601052\"},{\"1\":\"THYAO.IS\",\"2\":\"1.2631272\",\"3\":\"1.2631272\",\"4\":\"1.5884728\",\"5\":\"0.673722601\",\"6\":\"1.000000000\",\"7\":\"1.000000000\",\"8\":\"0.251366601\",\"9\":\"1.964164e-01\",\"10\":\"0.142007117\",\"11\":\"0.0057483171\",\"12\":\"0.794114368\",\"13\":\"0.3463780\",\"14\":\"NA\"},{\"1\":\"PGSUS.IS\",\"2\":\"0.8789941\",\"3\":\"0.8789941\",\"4\":\"0.8626481\",\"5\":\"0.687925828\",\"6\":\"0.751128991\",\"7\":\"0.644235926\",\"8\":\"0.647863799\",\"9\":\"5.243778e-01\",\"10\":\"0.403699171\",\"11\":\"0.0740614471\",\"12\":\"0.099960932\",\"13\":\"0.0000000\",\"14\":\"NA\"},{\"1\":\"ISCTR.IS\",\"2\":\"0.9520986\",\"3\":\"0.9520986\",\"4\":\"1.0969968\",\"5\":\"0.886557709\",\"6\":\"0.822855937\",\"7\":\"0.711941499\",\"8\":\"0.013207998\",\"9\":\"9.499569e-03\",\"10\":\"0.005327728\",\"11\":\"0.0028365688\",\"12\":\"0.646442849\",\"13\":\"0.4155782\",\"14\":\"0.292127238\"},{\"1\":\"KCHOL.IS\",\"2\":\"0.5362835\",\"3\":\"0.5362835\",\"4\":\"0.9169263\",\"5\":\"0.397264253\",\"6\":\"0.371995945\",\"7\":\"0.326835274\",\"8\":\"0.111062871\",\"9\":\"1.185596e-01\",\"10\":\"0.092118626\",\"11\":\"0.0205176422\",\"12\":\"1.000000000\",\"13\":\"0.4707873\",\"14\":\"0.207269392\"},{\"1\":\"ASELS.IS\",\"2\":\"0.2651602\",\"3\":\"0.2651602\",\"4\":\"0.9732999\",\"5\":\"0.344316547\",\"6\":\"0.131553030\",\"7\":\"0.075735116\",\"8\":\"0.054530942\",\"9\":\"4.649935e-02\",\"10\":\"0.048620449\",\"11\":\"0.0798211290\",\"12\":\"0.453736748\",\"13\":\"0.4099121\",\"14\":\"0.040353333\"},{\"1\":\"TAVHL.IS\",\"2\":\"0.6549657\",\"3\":\"0.6549657\",\"4\":\"0.8370175\",\"5\":\"0.631219479\",\"6\":\"0.583012628\",\"7\":\"0.436752529\",\"8\":\"0.176610268\",\"9\":\"1.616462e-01\",\"10\":\"0.119342290\",\"11\":\"0.0545729932\",\"12\":\"0.116569429\",\"13\":\"0.2619272\",\"14\":\"NA\"},{\"1\":\"GUBRF.IS\",\"2\":\"0.3337732\",\"3\":\"0.3337732\",\"4\":\"2.4717595\",\"5\":\"0.654588108\",\"6\":\"0.282461012\",\"7\":\"0.139280872\",\"8\":\"0.216936174\",\"9\":\"2.420395e-01\",\"10\":\"0.323773895\",\"11\":\"1.0000000000\",\"12\":\"0.233609031\",\"13\":\"0.3899068\",\"14\":\"0.199546266\"},{\"1\":\"SISE.IS\",\"2\":\"0.6301767\",\"3\":\"0.6301767\",\"4\":\"1.6035968\",\"5\":\"0.417389467\",\"6\":\"0.670898368\",\"7\":\"0.413794294\",\"8\":\"0.080302714\",\"9\":\"6.974276e-02\",\"10\":\"0.056285557\",\"11\":\"0.0859150522\",\"12\":\"0.631011399\",\"13\":\"0.3964843\",\"14\":\"0.105903364\"},{\"1\":\"SASA.IS\",\"2\":\"0.6940929\",\"3\":\"0.6940929\",\"4\":\"2.9186904\",\"5\":\"0.703284996\",\"6\":\"0.793636517\",\"7\":\"0.472990091\",\"8\":\"0.187281356\",\"9\":\"1.630192e-01\",\"10\":\"0.140919680\",\"11\":\"0.6012551196\",\"12\":\"0.449611266\",\"13\":\"0.5810025\",\"14\":\"1.000000000\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nWe will use K-means method. Let's plot elbow plot:\n\n![](images/paste-1622CD6D.png){width=\"400\"}\n\nWe have four clusters, let's fit model and see results:\n\n![](images/paste-4FEA4B21.png){width=\"400\"}\n\n![](images/paste-99DEFD23.png){width=\"400\"}\n\n![](images/paste-C458DE5D.png){width=\"400\"}\n\nCluster contents:\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"stock\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"predicted_cluster\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"TUPRS.IS\",\"2\":\"4\"},{\"1\":\"VAKBN.IS\",\"2\":\"1\"},{\"1\":\"KRDMD.IS\",\"2\":\"3\"},{\"1\":\"DOHOL.IS\",\"2\":\"1\"},{\"1\":\"AKBNK.IS\",\"2\":\"1\"},{\"1\":\"TKFEN.IS\",\"2\":\"1\"},{\"1\":\"FROTO.IS\",\"2\":\"4\"},{\"1\":\"GARAN.IS\",\"2\":\"1\"},{\"1\":\"KOZAA.IS\",\"2\":\"3\"},{\"1\":\"HALKB.IS\",\"2\":\"1\"},{\"1\":\"TCELL.IS\",\"2\":\"3\"},{\"1\":\"KOZAL.IS\",\"2\":\"3\"},{\"1\":\"VESTL.IS\",\"2\":\"3\"},{\"1\":\"YKBNK.IS\",\"2\":\"1\"},{\"1\":\"TTKOM.IS\",\"2\":\"3\"},{\"1\":\"BIMAS.IS\",\"2\":\"1\"},{\"1\":\"PETKM.IS\",\"2\":\"1\"},{\"1\":\"ARCLK.IS\",\"2\":\"3\"},{\"1\":\"EREGL.IS\",\"2\":\"3\"},{\"1\":\"SAHOL.IS\",\"2\":\"1\"},{\"1\":\"EKGYO.IS\",\"2\":\"1\"},{\"1\":\"THYAO.IS\",\"2\":\"1\"},{\"1\":\"PGSUS.IS\",\"2\":\"1\"},{\"1\":\"ISCTR.IS\",\"2\":\"1\"},{\"1\":\"KCHOL.IS\",\"2\":\"1\"},{\"1\":\"ASELS.IS\",\"2\":\"3\"},{\"1\":\"TAVHL.IS\",\"2\":\"1\"},{\"1\":\"GUBRF.IS\",\"2\":\"2\"},{\"1\":\"SISE.IS\",\"2\":\"1\"},{\"1\":\"SASA.IS\",\"2\":\"2\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nLet's look the mean return statistics of each cluster:\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"predicted_cluster\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"mean_1_year_return\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"std_1_year_return\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"mean_2_year_return\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"std_2_year_return\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"mean_3_year_return\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"std_3_year_return\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1\",\"2\":\"0.6875511\",\"3\":\"0.21664278\",\"4\":\"0.6875511\",\"5\":\"0.21664278\",\"6\":\"0.9416768\",\"7\":\"0.4306968\"},{\"1\":\"2\",\"2\":\"0.5139330\",\"3\":\"0.25478446\",\"4\":\"0.5139330\",\"5\":\"0.25478446\",\"6\":\"2.6952249\",\"7\":\"0.3160278\"},{\"1\":\"3\",\"2\":\"0.2868458\",\"3\":\"0.09417427\",\"4\":\"0.2868458\",\"5\":\"0.09417427\",\"6\":\"1.0818333\",\"7\":\"0.3795980\"},{\"1\":\"4\",\"2\":\"0.6035799\",\"3\":\"0.29160845\",\"4\":\"0.6035799\",\"5\":\"0.29160845\",\"6\":\"1.3649185\",\"7\":\"0.5043457\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n## References\n\n-   <https://www.investopedia.com/terms/c/cluster_analysis.asp>\n\n-   <https://www.investopedia.com/terms/f/factor-investing.asp>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}